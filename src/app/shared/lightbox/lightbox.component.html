<div class="lightbox-overlay" (click)="closeOnBackdrop($event)">
  <div class="lightbox-container">
    <div class="lightbox-image-container">
      <div *ngIf="loading" class="loading-spinner"></div>
      <img
        *ngIf="images && images.length && currentIndex >= 0"
        [src]="images[currentIndex].src"
        [alt]="images[currentIndex].alt || 'Image'"
        (load)="onImageLoad()"
        [style.display]="loading ? 'none' : 'block'">
    </div>

    <div class="lightbox-caption" *ngIf="images && images.length && currentIndex >= 0">
      <h3 *ngIf="images[currentIndex].title">{{ images[currentIndex].title }}</h3>
      <p *ngIf="images[currentIndex].caption">{{ images[currentIndex].caption }}</p>
      <span class="category" *ngIf="images[currentIndex].category">{{ images[currentIndex].category }}</span>
    </div>
  </div>

  <button class="close-btn" (click)="onClose()" aria-label="Close lightbox">
    <span class="material-icons">close</span>
  </button>

  <button
    *ngIf="images && images.length > 1"
    class="nav-btn prev"
    (click)="navigate(-1)"
    aria-label="Previous image">
    <span class="material-icons">navigate_before</span>
  </button>

  <button
    *ngIf="images && images.length > 1"
    class="nav-btn next"
    (click)="navigate(1)"
    aria-label="Next image">
    <span class="material-icons">navigate_next</span>
  </button>

  <div class="lightbox-counter" *ngIf="images && images.length > 1">
    {{ currentIndex + 1 }} / {{ images.length }}
  </div>
</div>
