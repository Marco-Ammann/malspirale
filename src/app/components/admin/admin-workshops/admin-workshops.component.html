<div class="admin-workshops-container">
  <h1>Workshops verwalten</h1>

  <div *ngIf="loading" class="loading">‚è≥ L√§dt...</div>
  <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>

  <form [formGroup]="workshopForm" (ngSubmit)="saveWorkshop()" class="workshop-form">
    <label>Titel:</label>
    <input type="text" formControlName="title" required />
    <div *ngIf="workshopForm.controls['title'].invalid && workshopForm.controls['title'].touched" class="error">
      Titel ist erforderlich und muss mindestens 3 Zeichen haben.
    </div>

    <label>Kurzbeschreibung:</label>
    <textarea formControlName="shortDescription"></textarea>

    <label>Lange Beschreibung:</label>
    <textarea formControlName="longDescription"></textarea>

    <label>Datum:</label>
    <input type="date" formControlName="date" required />

    <label>Startzeit:</label>
    <input type="time" formControlName="startTime" />

    <label>Endzeit:</label>
    <input type="time" formControlName="endTime" />

    <label>Preis (optional):</label>
    <input type="number" formControlName="price" />

    <label>Max. Teilnehmer:</label>
    <input type="number" formControlName="maxParticipants" />

    <label>Verf√ºgbare Pl√§tze:</label>
    <input type="number" formControlName="availableSlots" required />

    <label>Standort:</label>
    <input type="text" formControlName="location" required />

    <label>Wiederkehrend:</label>
    <select formControlName="recurring">
      <option [ngValue]="false">Einmalig</option>
      <option [ngValue]="true">W√∂chentlich</option>
    </select>

    <div *ngIf="workshopForm.controls['recurring'].value">
      <label>Woche im Monat (optional, f√ºr monatliche Wiederholung):</label>
      <input type="number" formControlName="recurringWeek" min="1" max="4" />
    
      <label>Wochentag:</label>
      <select formControlName="recurringDay">
        <option [ngValue]="0">Sonntag</option>
        <option [ngValue]="1">Montag</option>
        <option [ngValue]="2">Dienstag</option>
        <option [ngValue]="3">Mittwoch</option>
        <option [ngValue]="4">Donnerstag</option>
        <option [ngValue]="5">Freitag</option>
        <option [ngValue]="6">Samstag</option>
      </select>
    
    </div>

    <label>Bild hochladen:</label>
    <input type="file" (change)="handleFileInput($event)" accept="image/*" />
    <div *ngIf="imagePreview" class="image-preview-container">
      <img [src]="imagePreview" alt="Bildvorschau" class="image-preview" />
    </div>
    <label>Bild-Position:</label>
    <select formControlName="imagePosition">
      <option *ngFor="let position of imagePositions" [value]="position">{{ position }}</option>
    </select>

    <button type="submit" [disabled]="loading || workshopForm.invalid">
      {{ editMode ? "Workshop aktualisieren" : "Workshop hinzuf√ºgen" }}
    </button>
    <button type="button" (click)="resetForm()" *ngIf="editMode">Abbrechen</button>
  </form>

  <h2>Vorhandene Workshops</h2>
  <ul>
    <li *ngFor="let workshop of workshops">
      <span>{{ workshop.title }} - {{ workshop.date }}</span>
      <button (click)="editWorkshop(workshop)">üñä Bearbeiten</button>
      <button (click)="deleteWorkshop(workshop.id!)">üóë L√∂schen</button>
    </li>
  </ul>
</div>
