<div class="admin-workshops">
  <h1>Workshop-Management</h1>

  <!-- Formular für Erstellen/Bearbeiten -->
  <form [formGroup]="workshopForm" (ngSubmit)="saveWorkshop()" class="workshop-form">
    <h2>{{ editMode ? 'Workshop bearbeiten' : 'Neuen Workshop erstellen' }}</h2>

    <label>Titel:</label>
    <input type="text" formControlName="title" required />

    <label>Kurzbeschreibung:</label>
    <textarea formControlName="shortDescription"></textarea>

    <label>Datum:</label>
    <input type="date" formControlName="date" required />

    <label>Startzeit:</label>
    <input type="time" formControlName="startTime" />

    <label>Endzeit:</label>
    <input type="time" formControlName="endTime" />

    <label>Preis (optional):</label>
    <input type="number" formControlName="price" />

    <label>Max. Teilnehmer:</label>
    <input type="number" formControlName="maxParticipants" />

    <label>Verfügbare Plätze:</label>
    <input type="number" formControlName="availableSlots" required />

    <label>Standort:</label>
    <input type="text" formControlName="location" required />

    <!-- Bild-Upload -->
    <label>Bild hochladen:</label>
    <input type="file" (change)="handleFileInput($event)" accept="image/*" />
    <div *ngIf="imagePreview" class="image-preview">
      <img [src]="imagePreview" alt="Bildvorschau" />
    </div>

    <button type="submit" [disabled]="loading || workshopForm.invalid">
      {{ editMode ? 'Workshop aktualisieren' : 'Workshop hinzufügen' }}
    </button>
    <button type="button" (click)="resetForm()" *ngIf="editMode">Abbrechen</button>
  </form>

  <!-- Liste bestehender Workshops -->
  <h2>Vorhandene Workshops</h2>
  <div class="workshop-list">
    <div class="workshop-card" *ngFor="let workshop of workshops">
      <img [src]="workshop.image || 'assets/images/default-workshop.jpg'" alt="Workshop Bild" class="workshop-image" />
      <div class="workshop-info">
        <h3>{{ workshop.title }}</h3>
        <p>📅 {{ workshop.date | date:'dd.MM.yyyy' }}</p>
        <p>💰 {{ workshop.price ? (workshop.price | currency:'CHF') : 'Kostenlos' }}</p>
      </div>
      <div class="workshop-actions">
        <button (click)="editWorkshop(workshop)">✏ Bearbeiten</button>
        <button (click)="deleteWorkshop(workshop.id!)">🗑 Löschen</button>
      </div>
    </div>
  </div>
</div>
