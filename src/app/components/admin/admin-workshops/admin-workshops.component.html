<div class="admin-workshops">
  <h2>Angebote verwalten</h2>
  
  <!-- Liste der bestehenden Angebote -->
  <div class="workshops-list">
    <div *ngFor="let workshop of workshops" class="workshop-list-item">
      <div class="workshop-image">
        <img [src]="workshop.imageUrl || 'assets/images/default-workshop.jpg'" [alt]="workshop.title" />
      </div>
      <div class="workshop-details">
        <h3>{{ workshop.title }}</h3>
        <p class="short-description">{{ workshop.shortDescription }}</p>
        <div class="info">
          <span *ngIf="workshop.location"><strong>Ort:</strong> {{ workshop.location }}</span>
          <span *ngIf="workshop.date"><strong>Datum:</strong> {{ workshop.date | date:'dd.MM.yyyy' }}</span>
          <span *ngIf="workshop.price !== undefined">
            <strong>Preis:</strong> {{ workshop.price ? (workshop.price | currency:'CHF') : 'Kostenlos' }}
          </span>
          <span *ngIf="workshop.startTime && workshop.endTime">
            <strong>Uhrzeit:</strong> {{ workshop.startTime }} - {{ workshop.endTime }}
          </span>
          <!-- Weitere Infos nach Bedarf -->
        </div>
      </div>
      <div class="actions">
        <button (click)="editWorkshop(workshop)" class="btn btn-primary">Bearbeiten</button>
        <button (click)="deleteWorkshop(workshop.id)" class="btn btn-danger">Löschen</button>
      </div>
    </div>
  </div>

  <button (click)="createWorkshop()" class="new-workshop-btn">
    Neuen Eintrag hinzufügen
  </button>
<!-- Formular zur Erstellung/Bearbeitung -->
<div class="workshop-edit-form" *ngIf="selectedWorkshop">
  <form (ngSubmit)="saveWorkshop()">
    <!-- Zeile 1: Art des Angebots & Titel -->
    <div class="form-row">
      <div class="form-group half">
        <label for="type">Art des Angebots</label>
        <select id="type" [(ngModel)]="selectedWorkshop.type" name="type" required>
          <option value="workshop">Workshop (feste Termine)</option>
          <option value="malatelier">Malatelier (wiederkehrend)</option>
          <option value="individuelleAnfrage">Individuelle Anfrage (für besondere Anlässe)</option>
        </select>
      </div>
      <div class="form-group half">
        <label for="title">Titel</label>
        <input id="title" [(ngModel)]="selectedWorkshop.title" name="title" required />
      </div>
    </div>

    <!-- Zeile 2: Kurzbeschreibung & Beschreibung -->
    <div class="form-group">
      <label for="shortDescription">Kurzbeschreibung</label>
      <textarea
        id="shortDescription"
        [(ngModel)]="selectedWorkshop.shortDescription"
        name="shortDescription"
        required
      ></textarea>
    </div>
    <div class="form-group">
      <label for="description">Beschreibung</label>
      <textarea
        id="description"
        [(ngModel)]="selectedWorkshop.description"
        name="description"
        required
      ></textarea>
    </div>

    <!-- Zeile 3: Ort (immer benötigt) -->
    <div class="form-group">
      <label for="location">Ort</label>
      <input id="location" [(ngModel)]="selectedWorkshop.location" name="location" required />
    </div>

    <!-- Typ-spezifische Felder: Workshop -->
    <div *ngIf="selectedWorkshop.type === 'workshop'" class="type-specific">
      <div class="form-row">
        <div class="form-group half">
          <label for="date">Datum</label>
          <input id="date" type="date" [(ngModel)]="selectedWorkshop.date" name="date" required />
        </div>
        <div class="form-group half">
          <label for="price">Preis</label>
          <input id="price" type="number" [(ngModel)]="selectedWorkshop.price" name="price" required />
        </div>
      </div>
      <div class="form-row">
        <div class="form-group half">
          <label for="startTime">Startzeit</label>
          <input id="startTime" type="time" [(ngModel)]="selectedWorkshop.startTime" name="startTime" />
        </div>
        <div class="form-group half">
          <label for="endTime">Endzeit</label>
          <input id="endTime" type="time" [(ngModel)]="selectedWorkshop.endTime" name="endTime" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-group half">
          <label for="maxParticipants">Max. Teilnehmer</label>
          <input id="maxParticipants" type="number" [(ngModel)]="selectedWorkshop.maxParticipants" name="maxParticipants" />
        </div>
        <div class="form-group half">
          <label for="availableSlots">Verfügbare Plätze</label>
          <input id="availableSlots" type="number" [(ngModel)]="selectedWorkshop.availableSlots" name="availableSlots" />
        </div>
      </div>
    </div>

    <!-- Typ-spezifische Felder: Malatelier -->
    <div *ngIf="selectedWorkshop.type === 'malatelier'" class="type-specific">
      <div class="form-row">
        <div class="form-group half">
          <label for="frequency">Häufigkeit</label>
          <input
            id="frequency"
            type="text"
            [(ngModel)]="selectedWorkshop.frequency"
            name="frequency"
            placeholder="z.B. Jeden 1. Mittwoch im Monat"
            required
          />
        </div>
        <div class="form-group half">
          <label for="price">Preis (optional)</label>
          <input id="price" type="number" [(ngModel)]="selectedWorkshop.price" name="price" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-group half">
          <label for="maxParticipants">Max. Teilnehmer</label>
          <input
            id="maxParticipants"
            type="number"
            [(ngModel)]="selectedWorkshop.maxParticipants"
            name="maxParticipants"
          />
        </div>
        <div class="form-group half">
          <label for="availableSlots">Verfügbare Plätze</label>
          <input
            id="availableSlots"
            type="number"
            [(ngModel)]="selectedWorkshop.availableSlots"
            name="availableSlots"
          />
        </div>
      </div>
    </div>

    <!-- Typ-spezifische Felder: Individuelle Anfrage -->
    <div *ngIf="selectedWorkshop.type === 'individuelleAnfrage'" class="type-specific">
      <div class="form-group">
        <label for="contactEmail">Kontakt E-Mail</label>
        <input id="contactEmail" type="email" [(ngModel)]="selectedWorkshop.contactEmail" name="contactEmail" required />
      </div>
    </div>

    <!-- Bildfelder: URL + Upload -->
    <div class="form-row">
      <div class="form-group half">
        <label for="imageUrl">Bild-URL</label>
        <input id="imageUrl" [(ngModel)]="selectedWorkshop.imageUrl" name="imageUrl" />
      </div>
      <div class="form-group half">
        <label>Bild hochladen</label>
        <!-- Versteckter File-Input -->
        <input
          id="imageUpload"
          type="file"
          (change)="handleImageUpload($event)"
          class="file-input"
        />
        <!-- Custom-Label als Button -->
        <label for="imageUpload" class="file-input-btn">
          Bild auswählen
        </label>
      </div>
    </div>

    <div class="form-buttons">
      <button type="submit" class="btn-primary">Speichern</button>
      <button type="button" (click)="cancelEdit()" class="cancel-btn">Abbrechen</button>
    </div>
    <div class="error-message" *ngIf="errorMessage">{{ errorMessage }}</div>
  </form>
</div>

</div>
